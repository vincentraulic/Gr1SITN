<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<div class="row">
		<!-- right col -->
		<section class="col-lg-7 connectedSortable">
			<div class="box">
				<div class="box-header">
					<h3 class="box-title">
						<i class="fa fa-th"> </i> Phases
					</h3>
				</div>
				<div class="box-body">
					<div class="input-group margin">


						<h:form>
							<p:dataTable value="#{project.phases}" var="phase" widgetVar="50"
								styleClass="table table-bordered text-family" editable="true">
								<p:ajax event="rowEdit"
									listener="#{projectController.onEditPhase}" />
								<p:ajax event="rowEditCancel"
									listener="#{projectController.onCancelPhase}" />

								<p:column>
									<f:facet name="header">
										<h:outputText value="Nom" />
									</f:facet>
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{phase.name}" />
										</f:facet>
										<f:facet name="input">
											<h:inputText
												styleClass="form-control #{component.valid ? '' : 'has-error'}"
												value="#{phase.name}" required="true" name="name0"
												placeholder='Nom'>
												<f:validateLength minimum="2" maximum="50" />
											</h:inputText>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Coût" />
									</f:facet>
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{phase.cost}" />
										</f:facet>
										<f:facet name="input">
											<h:inputText
												styleClass="form-control #{component.valid ? '' : 'has-error'}"
												value="#{phase.cost}" required="true" name="cost0"
												placeholder="Coût">
											</h:inputText>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Date de début" />
									</f:facet>
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{phase.start}" />
										</f:facet>
										<f:facet name="input">
											<p:inputMask
												styleClass="form-control #{component.valid ? '' : 'has-error'}"
												value="#{phase.start}" mask="99/99/9999" required="true"
												name="dstart0" placeholder="dd/MM/aaaa">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</p:inputMask>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Date de fin" />
									</f:facet>
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{phase.end}" />
										</f:facet>
										<f:facet name="input">
											<p:inputMask
												styleClass="form-control #{component.valid ? '' : 'has-error'}"
												value="#{phase.end}" mask="99/99/9999" required="true"
												name="dend0" placeholder="dd/MM/aaaa">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</p:inputMask>
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column headerText="Options">
									<p:rowEditor />
								</p:column>

							</p:dataTable>

							<p:panelGrid columns="2" styleClass="text-family">
								<h:outputLabel for="phasename" value="Nom de la phase: " />
								<p:inputText id="phasename"
									value="#{phaseController.phase.name}" name="phasename" />
								<h:outputLabel for="phasecost" value="Coût: " />
								<p:inputText id="phasecost"
									value="#{phaseController.phase.cost}" name="phasecost"/>
								<h:outputLabel for="phasestart" value="Date de début: " />
								<p:inputMask id="phasestart"
									styleClass="form-control #{component.valid ? '' : 'has-error'}"
									value="#{phaseController.phase.start}" mask="99/99/9999"
									required="true" name="phasestart" placeholder="dd/MM/aaaa">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:inputMask>
								<h:outputLabel for="phaseend" value="Date de fin: " />
								<p:inputMask id="phaseend"
									styleClass="form-control #{component.valid ? '' : 'has-error'}"
									value="#{phaseController.phase.end}" mask="99/99/9999"
									required="true" name="phaseend" placeholder="dd/MM/aaaa">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:inputMask>
								<f:facet name="footer">
									<p:commandButton id="addButton"
										value="Ajouter la phase"
										actionListener="#{phaseController.addPhase(project)}"
										update="tabViewProject" 
									/>
								</f:facet>
							</p:panelGrid>
						</h:form>


					</div>
				</div>
			</div>
		</section>
	</div>
	<!-- /.row -->

</ui:composition>